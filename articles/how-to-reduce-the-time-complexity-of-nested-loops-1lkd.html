<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How to reduce the time complexity of nested loops - Leandro Proença</title>
  <link rel="icon" type="image/svg+xml" href="/images/favicon.svg">

  <!-- Google Fonts - Nunito for name, Caveat for bio -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800&family=Caveat:wght@500;700&display=swap" rel="stylesheet">

  <!-- SEO Meta Tags -->
  <meta name="description" content="In this post I'll demonstrate a way to understand, analyse and reduce the time complexity on algorithms, specially on **nested loops**.

The examples will use Ru">
  <meta name="author" content="Leandro Proença">
  <link rel="canonical" href="https://leandronsp.com/articles/how-to-reduce-the-time-complexity-of-nested-loops-1lkd.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://leandronsp.com/articles/how-to-reduce-the-time-complexity-of-nested-loops-1lkd.html">
  <meta property="og:title" content="How to reduce the time complexity of nested loops">
  <meta property="og:description" content="In this post I'll demonstrate a way to understand, analyse and reduce the time complexity on algorithms, specially on **nested loops**.

The examples will use Ru">
  <meta property="og:site_name" content="Leandro Proença">
  <meta property="article:published_time" content="2021-12-04T22:11:13Z">
  <meta property="article:tag" content="programming">
      <meta property="article:tag" content="ruby">
      <meta property="article:tag" content="algorithms">

  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "How to reduce the time complexity of nested loops",
    "datePublished": "2021-12-04T22:11:13Z",
    "author": {
      "@type": "Person",
      "name": "Leandro Proença"
    },
    "description": "In this post I'll demonstrate a way to understand, analyse and reduce the time complexity on algorithms, specially on **nested loops**.

The examples will use Ru",
        "keywords": "programming, ruby, algorithms"
  }
  </script>

  <link rel="preload" href="/assets/css/app.css" as="style">
  <script>
    // Prevent FOUC (Flash of Unstyled Content) by setting theme before CSS loads
    (function() {
      const theme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
  <link rel="stylesheet" href="/assets/css/app.css">
  <style>
    /* Force scrollbar to always be visible to prevent layout shift */
    html {
      overflow-y: scroll;
    }

    /* Softer dark theme colors */
    [data-theme="dark"] {
      --base-100: #2a2f3a;
      --base-200: #232831;
      --base-300: #1e222a;
      --base-content: #e8eaed;
    }
    [data-theme="dark"] .article-card {
      background-color: transparent;
      border-color: #3d4454;
    }
    [data-theme="dark"] .article-card:hover {
      border-color: #4a5568;
    }
    /* Keep pinned article with background for prominence in dark theme - lighter pastel */
    [data-theme="dark"] .pinned-article {
      background-color: #3a4050 !important;
    }
    [data-theme="dark"] .prose {
      color: #e8eaed;
    }
    [data-theme="dark"] .prose h1,
    [data-theme="dark"] .prose h2,
    [data-theme="dark"] .prose h3,
    [data-theme="dark"] .prose h4 {
      color: #f0f2f5;
    }
    [data-theme="dark"] .prose a {
      color: #8fb4ff;
    }
    [data-theme="dark"] .prose code {
      background-color: #3d4454;
      color: #f0f2f5;
    }
    [data-theme="dark"] .prose pre {
      background-color: #1e222a;
      border: 1px solid #3d4454;
    }
    [data-theme="dark"] input {
      background-color: #2f3542;
      border-color: #3d4454;
      color: #e8eaed;
    }
    [data-theme="dark"] input::placeholder {
      color: #9ca3af;
    }
    /* Language switcher dark theme styling */
    [data-theme="dark"] .lang-switcher-bg {
      background-color: rgba(59, 130, 246, 0.15) !important;
      border-color: rgba(59, 130, 246, 0.3) !important;
    }
    /* Blog name styling */
    .blog-name {
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      letter-spacing: -0.02em;
    }
    /* Intro text styling */
    .intro-text {
      font-family: 'Caveat', cursive;
      font-weight: 600;
      color: #6b7280; /* Darker pastel gray for light theme */
    }
    [data-theme="dark"] .intro-text {
      color: #d4d4d8; /* Lighter pastel gray for dark theme */
    }
    /* Article card styling */
    article {
      background-color: transparent;
      border: none;
      border-radius: 0.5rem;
      padding: 2rem;
    }
    [data-theme="dark"] article {
      background-color: transparent;
    }
    /* Article images styling - consistent sizing */
    .prose img {
      max-width: 800px;
      width: 100%;
      height: auto;
      display: block;
      margin-left: auto;
      margin-right: auto;
      border-radius: 0.5rem;
    }
  </style>
</head>
<body class="min-h-screen bg-base-100">
  <!-- Fixed Header - Article page: focus on reading -->
  <header class="sticky top-0 z-50 bg-base-100 border-b border-base-300 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6 py-4 max-w-6xl">
      <!-- Same structure as homepage, no search/language/tags -->
      <div class="flex flex-col gap-2">
        <!-- Name + Social Icons + Guide Links (icons hidden on small) -->
        <div class="flex items-center gap-3">
          <h1 class="blog-name text-2xl sm:text-3xl font-bold text-base-content flex-shrink-0">Leandro Proença</h1>
          <div class="hidden md:flex items-center gap-2">
            <a href="https://linkedin.com/in/leandronsp" target="_blank" rel="noopener noreferrer" class="text-base-content/60 hover:text-primary transition-colors" title="LinkedIn">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            </a>
            <a href="https://github.com/leandronsp" target="_blank" rel="noopener noreferrer" class="text-base-content/60 hover:text-primary transition-colors" title="GitHub">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg>
            </a>
            <button id="theme-toggle" class="text-base-content/60 hover:text-primary transition-colors" title="Toggle theme">
              <svg xmlns="http://www.w3.org/2000/svg" class="sun-icon h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
              <svg xmlns="http://www.w3.org/2000/svg" class="moon-icon h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            </button>
          </div>
          <!-- Guide Links (medium and up) -->
          <div class="hidden md:flex items-center gap-3 ml-4">
            <a href="https://concorrencia101.leandronsp.com" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-sm font-medium text-base-content/70 hover:text-primary transition-colors" title="Concorrência 101">
              <span>Concorrência 101</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
            <a href="https://web101.leandronsp.com" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-sm font-medium text-base-content/70 hover:text-primary transition-colors" title="Web 101">
              <span>Web 101</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
            <a href="https://aws101.leandronsp.com" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-sm font-medium text-base-content/70 hover:text-primary transition-colors" title="AWS 101">
              <span>AWS 101</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
          </div>
        </div>

        <!-- Bio -->
        <p class="intro-text text-xl sm:text-2xl leading-tight">
          Software Developer 15+ years working for companies worldwide
        </p>
      </div>

    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto max-w-6xl">
    <article class="bg-base-100">
      <!-- Back link -->
      <a href="/" onclick="event.preventDefault(); history.back();" class="inline-flex items-center gap-2 text-lg font-medium transition-colors text-base-content/70 hover:text-primary cursor-pointer mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Back
      </a>

      <h1 class="text-5xl font-bold leading-tight mb-6">How to reduce the time complexity of nested loops</h1>

      <div class="flex flex-wrap items-center gap-3 mb-8 text-base text-base-content/85">
        <div class="flex items-center gap-1.5">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          <span>Published 04 Dec 2021</span>
        </div>

        <div class="flex items-center gap-1.5">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
  </svg>
  <div class="flex gap-2 flex-wrap">
    <span class="inline-flex items-center px-3 py-1 text-sm border border-base-content/25 rounded-full">programming</span><span class="inline-flex items-center px-3 py-1 text-sm border border-base-content/25 rounded-full">ruby</span><span class="inline-flex items-center px-3 py-1 text-sm border border-base-content/25 rounded-full">algorithms</span>
  </div>
</div>

      </div>

      <div class="prose prose-lg max-w-none">
        <p>In this post I’ll demonstrate a way to understand, analyse and reduce the time complexity on algorithms, specially on <strong>nested loops</strong>.</p>
<p>The examples will use Ruby but it can be translated to any programming language.</p>
<h2><a href="#problem" aria-hidden="true" class="anchor" id="problem"></a>Problem</h2>
<p>Working throughout a variety of projects, it’s not rare to stumble on pieces of code like the following, a “nested loop”, which is a loop under another loop:</p>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-ruby" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #c678dd;">for</span> <span style="color: #e06c75;">group</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">groups</span>
</div><div class="line" data-line="2">  <span style="color: #c678dd;">for</span> <span style="color: #e06c75;">user</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">users</span>
</div><div class="line" data-line="3">    <span style="color: #7f848e;"># do something with the group and user</span>
</div><div class="line" data-line="4">  <span style="color: #c678dd;">end</span>
</div><div class="line" data-line="5"><span style="color: #c678dd;">end</span>
</div></code></pre>
<p>Analysing the above code, and assuming we have 100 groups and 100 users:</p>
<ul>
<li>for each group (100 times) we iterate over all users (100 times), which leads <code>100 * 100 = 10000</code> iterations</li>
<li>each iteration <a href="https://en.wikipedia.org/wiki/Central_processing_unit#Clock_rate">has a cost to the CPU</a>, so the more iterations we do, the more our algorithm will perform worse</li>
<li>if the lists grow over time, we can face serious performance issues on such algorithm</li>
</ul>
<p>In <a href="https://www.freecodecamp.org/news/big-o-notation-why-it-matters-and-why-it-doesnt-1674cfa8a23c/">the Big O notation</a> analysis, this algorithm may end up having a <code>squared</code> time complexity, or <code>O(n²)</code>, because <code>100 * 100 = 100²</code>.</p>
<h2><a href="#can-we-improve-it" aria-hidden="true" class="anchor" id="can-we-improve-it"></a>Can we improve it?</h2>
<p>With regard to reducing the time complexity of <code>O(n²)</code> <strong>squared</strong>, we can work to reduce to <code>O(n)</code> <strong>linear</strong> or <code>O(log(n))</code> in most cases, which would make our algorithm to perform faster.</p>
<p>There are some category of problems where it’s not possible to reduce in optimal ways, but in our example it’s perfectly possible to reduce.</p>
<p>Let’s see how to improve it.</p>
<h2><a href="#reducing-iterations" aria-hidden="true" class="anchor" id="reducing-iterations"></a>Reducing iterations</h2>
<p>Remember that at this point, our algorithm will perform 10.000 iterations, <code>100²</code>:</p>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-ruby" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #e06c75;">groups</span> <span style="color: #56b6c2;">=</span> <span style="color: #c678dd;">[</span><span style="color: #d19a66;">1</span><span style="color: #abb2bf;">,</span> <span style="color: #d19a66;">2</span><span style="color: #abb2bf;">,</span> <span style="color: #56b6c2;">...</span><span style="color: #abb2bf;">.</span><span style="color: #d19a66;">100</span><span style="color: #c678dd;">]</span>
</div><div class="line" data-line="2"><span style="color: #e06c75;">users</span>  <span style="color: #56b6c2;">=</span> <span style="color: #c678dd;">[</span><span style="color: #d19a66;">1</span><span style="color: #abb2bf;">,</span> <span style="color: #d19a66;">2</span><span style="color: #abb2bf;">,</span> <span style="color: #56b6c2;">...</span><span style="color: #abb2bf;">.</span><span style="color: #d19a66;">100</span><span style="color: #c678dd;">]</span>
</div><div class="line" data-line="3">
</div><div class="line" data-line="4"><span style="color: #c678dd;">for</span> <span style="color: #e06c75;">group</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">groups</span>
</div><div class="line" data-line="5">  <span style="color: #c678dd;">for</span> <span style="color: #e06c75;">user</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">users</span>
</div><div class="line" data-line="6"><span style="color: #56b6c2;">...</span>
</div></code></pre>
<p>A naive solution is to remove the nested loop:</p>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-ruby" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #c678dd;">for</span> <span style="color: #e06c75;">group</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">groups</span>
</div><div class="line" data-line="2">  <span style="color: #7f848e;"># do something with group and user</span>
</div><div class="line" data-line="3">  <span style="color: #7f848e;"># now we are missing the user, but we need to fetch the user information from another data structure</span>
</div><div class="line" data-line="4"><span style="color: #c678dd;">end</span>
</div></code></pre>
<ul>
<li>the algorithm will perform only 100 iterations, much faster</li>
<li>which means it’s <strong>linear</strong>, or <code>O(n)</code></li>
</ul>
<p>However our algorithm is lo longer working, because we have to fetch the user information <em>from inside the groups loop</em>.</p>
<p>Ideally, for each group we want the fetch the user information in <strong>constant time</strong>, no matter how big is the user’s list.</p>
<h2><a href="#long-live-the-hash-tables" aria-hidden="true" class="anchor" id="long-live-the-hash-tables"></a>Long live the hash tables</h2>
<p>In computer science, <a href="https://www.geeksforgeeks.org/data-structures/">data structures</a> are a VERY important topic to study and understand. In order to fetch the user information in constant time <code>O(1)</code>, we can use a <a href="https://en.wikipedia.org/wiki/Hash_table">hash table</a>.</p>
<p>Ruby provides this data structure out of the box, which is called <a href="https://ruby-doc.org/core-3.0.3/Hash.html">Hash</a>.</p>
<h3><a href="#building-a-hash" aria-hidden="true" class="anchor" id="building-a-hash"></a>Building a hash</h3>
<p>How can we build a hash containing all the information <em>required</em> in the groups loop? We must <strong>iterate over all users</strong> and <em>build the hash</em> with the needed information.</p>
<p>Such technique is widely used for creating structure like “indices” where the information is accessed via a <strong>key</strong> in constant time <code>O(1)</code>. Example:</p>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-ruby" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #e06c75;">users_idx</span> <span style="color: #56b6c2;">=</span> <span style="color: #c678dd;">&lbrace;</span><span style="color: #c678dd;">&rbrace;</span>
</div><div class="line" data-line="2">
</div><div class="line" data-line="3"><span style="color: #c678dd;">for</span> <span style="color: #e06c75;">user</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">users</span>
</div><div class="line" data-line="4">  <span style="color: #e06c75;">users_idx</span><span style="color: #c678dd;">[</span><span style="color: #e06c75;">user</span><span style="color: #c678dd;">[</span><span style="color: #e06c75;">:id</span><span style="color: #c678dd;">]</span><span style="color: #c678dd;">]</span> <span style="color: #56b6c2;">=</span> <span style="color: #56b6c2;">...</span>
</div><div class="line" data-line="5"><span style="color: #e06c75;">end</span>
</div></code></pre>
<p>Then wherever we have to fetch the user information, we are able to do it be accessing via <code>users_idx</code> and the respective keys.</p>
<h2><a href="#putting-all-together" aria-hidden="true" class="anchor" id="putting-all-together"></a>Putting all together</h2>
<p>Continuing on the challenge to reduce the iterations on our algorithm, we have to perform the following steps:</p>
<ul>
<li>build the “index” with the information to be accessed later</li>
<li>iterate over the loop and fetch the additional information from the previously created “index”</li>
</ul>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-ruby" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #e06c75;">users_idx</span> <span style="color: #56b6c2;">=</span> <span style="color: #c678dd;">&lbrace;</span><span style="color: #c678dd;">&rbrace;</span>
</div><div class="line" data-line="2">
</div><div class="line" data-line="3"><span style="color: #c678dd;">for</span> <span style="color: #e06c75;">user</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">users</span>
</div><div class="line" data-line="4">  <span style="color: #e06c75;">users_idx</span><span style="color: #c678dd;">[</span><span style="color: #e06c75;">user</span><span style="color: #c678dd;">[</span><span style="color: #e06c75;">:group_id</span><span style="color: #c678dd;">]</span><span style="color: #c678dd;">]</span> <span style="color: #56b6c2;">=</span> <span style="color: #56b6c2;">...</span>
</div><div class="line" data-line="5"><span style="color: #e06c75;">end</span>
</div><div class="line" data-line="6">
</div><div class="line" data-line="7"><span style="color: #c678dd;">for</span> <span style="color: #e06c75;">group</span> <span style="color: #c678dd;">in</span> <span style="color: #e06c75;">groups</span>
</div><div class="line" data-line="8">  <span style="color: #e06c75;">user_information</span> <span style="color: #56b6c2;">=</span> <span style="color: #e06c75;">users_idx</span><span style="color: #c678dd;">[</span><span style="color: #e06c75;">group</span><span style="color: #c678dd;">[</span><span style="color: #e06c75;">:id</span><span style="color: #c678dd;">]</span><span style="color: #c678dd;">]</span>
</div><div class="line" data-line="9">  <span style="color: #7f848e;"># do something with group AND user information</span>
</div><div class="line" data-line="10"><span style="color: #c678dd;">end</span>
</div></code></pre>
<p>But wait, two loops? Isn’t it still <strong>squared</strong> <code>O(n²)</code>? Let’s compare it.</p>
<p>The first solution performs <code>100 * 100 = 10.000</code> iterations, whereas the second performs <em>100 iterations for building the index plus 100 iterations</em> for iterating over groups, <code>100 + 100 = 200</code>. Put simply:</p>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-bash" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #61afef;">nested</span> <span style="color: #e06c75;">loop:</span>    <span style="color: #d19a66;">100</span> <span style="color: #e06c75;">*</span> <span style="color: #d19a66;">100</span> <span style="color: #e06c75;">=</span> <span style="color: #e06c75;">10.000</span>
</div><div class="line" data-line="2"><span style="color: #61afef;">index</span> <span style="color: #e06c75;">AND</span> <span style="color: #e06c75;">loop:</span> <span style="color: #d19a66;">100</span> <span style="color: #e06c75;">+</span> <span style="color: #d19a66;">100</span> <span style="color: #e06c75;">=</span> <span style="color: #d19a66;">200</span>
</div></code></pre>
<p>It’s still WAY lower than the initial <code>10.000</code>. We could write even more loops, three, four, five times. It doesn’t matter, it will be <strong>linear</strong> <code>O(n)</code>, because in terms of time complexity, <code>O(n) = O(2n) = O(3n)</code> and so on…</p>
<h2><a href="#comparing-both-solutions" aria-hidden="true" class="anchor" id="comparing-both-solutions"></a>Comparing both solutions</h2>
<p>In <a href="https://gist.github.com/leandronsp/70f9effd63007a9d55d29527788d3181">this Gist</a> I created the dummy data and the benchmark in order to compare both solutions.</p>
<p>For small list sizes, there are no practical differences. But with bigger lists, the improvement is perceived.</p>
<p>Here are the results, on <strong>how faster is using the index</strong>:</p>
<pre class="athl" style="color: #abb2bf; background-color: #282c34;"><code class="language-bash" translate="no" tabindex="0"><div class="line" data-line="1"><span style="color: #d19a66;">10</span> <span style="color: #e06c75;">groups</span>   <span style="color: #56b6c2;">|</span> <span style="color: #d19a66;">10</span> <span style="color: #e06c75;">users</span>   <span style="color: #e06c75;">=</span><span style="color: #56b6c2;">&gt;</span> <span style="color: #61afef;">2x</span>   <span style="color: #61afef;">faster</span>
</div><div class="line" data-line="2"><span style="color: #d19a66;">100</span> <span style="color: #e06c75;">groups</span>  <span style="color: #56b6c2;">|</span> <span style="color: #d19a66;">100</span> <span style="color: #e06c75;">users</span>  <span style="color: #e06c75;">=</span><span style="color: #56b6c2;">&gt;</span> <span style="color: #61afef;">3x</span>   <span style="color: #61afef;">faster</span>
</div><div class="line" data-line="3"><span style="color: #d19a66;">100</span> <span style="color: #e06c75;">groups</span>  <span style="color: #56b6c2;">|</span> <span style="color: #d19a66;">100</span> <span style="color: #e06c75;">users</span>  <span style="color: #e06c75;">=</span><span style="color: #56b6c2;">&gt;</span> <span style="color: #61afef;">31x</span>  <span style="color: #61afef;">faster</span>
</div><div class="line" data-line="4"><span style="color: #d19a66;">1000</span> <span style="color: #e06c75;">groups</span> <span style="color: #56b6c2;">|</span> <span style="color: #d19a66;">1000</span> <span style="color: #e06c75;">users</span> <span style="color: #e06c75;">=</span><span style="color: #56b6c2;">&gt;</span> <span style="color: #61afef;">70x</span>  <span style="color: #61afef;">faster</span>
</div><div class="line" data-line="5"><span style="color: #d19a66;">5000</span> <span style="color: #e06c75;">groups</span> <span style="color: #56b6c2;">|</span> <span style="color: #d19a66;">5000</span> <span style="color: #e06c75;">users</span> <span style="color: #e06c75;">=</span><span style="color: #56b6c2;">&gt;</span> <span style="color: #61afef;">510x</span> <span style="color: #61afef;">faster</span>
</div></code></pre>
<h2><a href="#conclusion" aria-hidden="true" class="anchor" id="conclusion"></a>Conclusion</h2>
<p>This post is a demonstration on how to analyse, understand and reduce time complexity on algorithms, specifically when we face situations of <em>nested loops</em>.</p>
<p>Most of times, instead of trying to look to another complex solutions such as caching and even more complex ones, understanding algorithms analysis can help us to write good and cheaper solutions.</p>
<p>Moreover, in case the loops perform <strong>database queries using ORM</strong>, many nested loops can be improved by just using <strong>SQL JOINS</strong>.</p>
      </div>

      <!-- Back to top -->
      <div class="mt-12 mb-8 text-center">
        <a href="#" onclick="event.preventDefault(); window.scrollTo({ top: 0, behavior: 'smooth' });" class="inline-flex items-center gap-2 text-xl font-medium transition-colors text-base-content/70 hover:text-primary cursor-pointer">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
          </svg>
          Back to top
        </a>
      </div>
    </article>

    <!-- Giscus Comments -->
    <div class="mt-16">
      <div class="border-t border-base-300 pt-8">
        <h2 class="text-2xl font-bold mb-6">Comments</h2>
        <script src="https://giscus.app/client.js"
                data-repo="leandronsp/leandronsp.com"
                data-repo-id="R_kgDOQGG-eQ"
                data-category="Announcements"
                data-category-id="DIC_kwDOQGG-ec4Cw4TN"
                data-mapping="pathname"
                data-strict="0"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="preferred_color_scheme"
                data-lang="en"
                crossorigin="anonymous"
                async>
        </script>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-16 pt-8 pb-6 border-t border-base-300">
      <div class="text-center text-sm text-base-content/80">
        <p>
          Powered by
          <a
            href="https://github.com/leandronsp/curupira"
            target="_blank"
            rel="noopener noreferrer"
            class="font-semibold text-blue-600 hover:underline"
          >
            Curupira
          </a>
          | Open source blog platform built with Phoenix LiveView
        </p>
        <p class="mt-2 text-xs text-base-content/70">
          Licensed under
          <a
            href="https://github.com/leandronsp/curupira/blob/master/LICENSE"
            target="_blank"
            rel="noopener noreferrer"
            class="text-blue-600 hover:underline"
          >
            AGPL-3.0
          </a>
        </p>
      </div>
    </footer>
  </main>

  <script src="/static-theme.js" defer></script>
  <script src="/static-filters.js" defer></script>
  <script src="/static-search.js" defer></script>
  <script src="/static-giscus.js" defer></script>

  <!-- Lazy load Google Analytics after page is interactive -->
  <script>
    (function() {
      function loadGTM() {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0Y5RNLZMKN');

        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-0Y5RNLZMKN';
        document.head.appendChild(script);
      }

      // Load after page is idle, or after 2 seconds as fallback
      if ('requestIdleCallback' in window) {
        requestIdleCallback(loadGTM, { timeout: 2000 });
      } else {
        setTimeout(loadGTM, 2000);
      }
    })();
  </script>
</body>
</html>
