(function(){const o=document.getElementById("search-input");if(!o)return;const h=document.getElementById("articles-container"),u=document.getElementById("no-results");let c=[],l=[],r="all";async function p(){try{l=await(await fetch("/search-index.json")).json()}catch(e){console.error("Failed to load search index:",e),l=[]}}async function g(){c=Array.from(h.querySelectorAll(".article-card")),await p()}function a(e){return(e||"").toLowerCase().trim()}function b(e,t){if(!t)return!0;const n=e.getAttribute("data-slug")||"",s=l.find(d=>d.slug===n);if(!s){const d=a(e.getAttribute("data-title")),y=a(e.getAttribute("data-tags"));return d.includes(t)||y.includes(t)}const i=a(s.title),m=a((s.tags||[]).join(" "));return i.includes(t)||m.includes(t)}function x(e){if(r==="all")return!0;const t=e.getAttribute("data-slug")||"",n=l.find(i=>i.slug===t);if(!n)return!0;const s=n.language||"en";return r==="pt"?s==="pt-BR"||s==="pt":s===r}function f(){const e=a(o.value);c.forEach(n=>{const s=b(n,e),i=x(n);s&&i?(n.style.display="",n.classList.remove("hidden")):(n.style.display="none",n.classList.add("hidden"))}),c.filter(n=>n.style.display!=="none").length===0?u.classList.remove("hidden"):u.classList.add("hidden"),window.pagination&&window.pagination.handleSearch&&window.pagination.handleSearch()}o.addEventListener("input",f),window.setLanguageFilter=function(e){r=e,document.querySelectorAll(".lang-filter-btn").forEach(t=>{t.getAttribute("data-lang")===e?(t.className="lang-filter-btn px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium transition-colors bg-blue-600 text-white",t.getAttribute("data-lang")!=="all"&&t.classList.add("border-l-2","border-base-300")):(t.className="lang-filter-btn px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium transition-colors bg-base-100 hover:bg-base-200",t.getAttribute("data-lang")!=="all"&&t.classList.add("border-l-2","border-base-300"))}),f()},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()})();
