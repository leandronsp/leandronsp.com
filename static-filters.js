(function(){let c=[],e={lang:"all",tag:null,search:""};function w(){const t=new URLSearchParams(window.location.search);return{lang:t.get("lang")||"all",tag:t.get("tag")||null,search:t.get("q")||"",page:parseInt(t.get("page"))||1}}function s(t){const a=new URLSearchParams(window.location.search);Object.entries(t).forEach(([n,r])=>{r===null||r===""||r==="all"||r===1?a.delete(n):a.set(n,r)});const l=a.toString()?`${window.location.pathname}?${a.toString()}`:window.location.pathname;window.history.pushState({},"",l)}async function h(){try{c=await(await fetch("/tags.json")).json()}catch(t){console.error("Failed to load tags:",t),c=[]}}function o(){document.querySelectorAll(".article-card").forEach(a=>{let l=!0;if(e.lang!=="all"){const n=a.getAttribute("data-language")||"en";e.lang==="pt"?l=l&&(n==="pt-BR"||n==="pt"):l=l&&n===e.lang}if(e.tag){const n=a.getAttribute("data-tags")||"";l=l&&n.includes(e.tag.toLowerCase())}l?a.style.display="":a.style.display="none"}),window.pagination&&window.pagination.handleSearch&&window.pagination.handleSearch()}function g(){document.querySelectorAll(".tag-pill").forEach(a=>{const l=a.getAttribute("data-tag");l==="all"&&!e.tag||l===e.tag?a.className="tag-pill px-4 py-1.5 text-sm font-medium rounded-full transition-all whitespace-nowrap cursor-pointer bg-primary text-white":a.className="tag-pill px-4 py-1.5 text-sm font-medium rounded-full transition-all whitespace-nowrap cursor-pointer bg-transparent hover:bg-base-200 text-base-content"})}function f(){g()}function u(){document.querySelectorAll(".lang-filter-btn").forEach(t=>{t.getAttribute("data-lang")===e.lang?t.className="lang-filter-btn px-4 py-1.5 text-sm font-medium rounded-full transition-all whitespace-nowrap cursor-pointer bg-primary text-white":t.className="lang-filter-btn px-4 py-1.5 text-sm font-medium rounded-full transition-all whitespace-nowrap cursor-pointer bg-transparent hover:bg-base-100 text-base-content"})}function i(){return window.location.pathname.includes("/articles/")}window.blogFilters={setLanguage(t){if(localStorage.setItem("blog-filter-lang",t),i()){const a=new URLSearchParams;t!=="all"&&a.set("lang",t),window.location.href="/"+(a.toString()?"?"+a.toString():"");return}e.lang=t,s({lang:t,page:1}),u(),g(),o()},setTag(t){if(t?localStorage.setItem("blog-filter-tag",t):localStorage.removeItem("blog-filter-tag"),i()){const a=new URLSearchParams;a.set("tag",t),window.location.href="/?"+a.toString();return}e.tag===t?(e.tag=null,localStorage.removeItem("blog-filter-tag")):e.tag=t,s({tag:e.tag,page:1}),g(),o()},clearTag(){if(localStorage.removeItem("blog-filter-tag"),i()){window.location.href="/";return}e.tag=null,s({tag:null,page:1}),g(),o()},remove(t){t==="lang"?this.setLanguage("all"):t==="tag"&&this.setTag(e.tag)},clearAll(){e.lang="all",e.tag=null,s({lang:null,tag:null,page:1}),u(),f(),o()},getFilters(){return{...e}},init(){if(i()){let a=!1,l=!1;if(document.referrer)try{const n=new URL(document.referrer);if(n.origin===window.location.origin){const r=new URLSearchParams(n.search),m=r.get("lang"),p=r.get("tag");m&&(e.lang=m,a=!0),p&&(e.tag=p,l=!0)}}catch{}if(a||(e.lang=localStorage.getItem("blog-filter-lang")||"all"),!l){const n=localStorage.getItem("blog-filter-tag");e.tag=n||null}}else{const a=w();e.lang=a.lang,e.tag=a.tag,e.search=a.search,localStorage.setItem("blog-filter-lang",e.lang),e.tag?localStorage.setItem("blog-filter-tag",e.tag):localStorage.removeItem("blog-filter-tag")}const t=document.getElementById("search-input");t&&e.search&&!i()&&(t.value=e.search)}};async function d(){await h(),window.blogFilters.init(),f(),o()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d()})();
